
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web3Modal - Connect 500+ Wallets</title>
    <style>
        body {
            background-color: #141414;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        .header-box {
            text-align: center;
            margin-bottom: 40px;
        }

        .header-box h1 {
            background: -webkit-linear-gradient(#4facfe, #00f2fe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Tùy chỉnh nút của Web3Modal một chút nếu cần */
        w3m-button {
            transform: scale(1.2); /* Phóng to nút mặc định */
        }
    </style>
</head>
<body>

    <div class="header-box">
        <h1>Cổng Kết Nối Đa Ví Web3</h1>
        <p style="color: #888;">Hỗ trợ MetaMask, Trust, Binance, OKX, Bitget, QR Code Mobile và 500+ ví khác</p>
    </div>

    <!-- Đây là NÚT THẦN KỲ của Web3Modal. Nó sẽ tự động biến đổi khi đã kết nối -->
    <w3m-button></w3m-button>

    <!-- Nạp thư viện Web3Modal thông qua ES Modules -->
    <script type="module">
        // Import thư viện từ CDN esm.sh (Hỗ trợ tốt ES Module trên trình duyệt)
        import { createWeb3Modal, defaultConfig } from 'https://esm.sh/@web3modal/ethers5@4.1.1';

        // =====================================================================
        // ⚠️ QUAN TRỌNG: BẠN PHẢI THAY MÃ PROJECT ID CỦA BẠN VÀO ĐÂY
        // Lấy miễn phí tại: https://cloud.walletconnect.com/
        // =====================================================================
        const projectId = '8151f1532050e0dcf4daeb6baf32f507'; // <-- Thay bằng Project ID của bạn
        
        // 1. Cấu hình các mạng lưới (Chains) bạn muốn hỗ trợ
        const mainnet = {
            chainId: 1,
            name: 'Ethereum',
            currency: 'ETH',
            explorerUrl: 'https://etherscan.io',
            rpcUrl: 'https://cloudflare-eth.com'
        }

        const bsc = {
            chainId: 56,
            name: 'BNB Smart Chain',
            currency: 'BNB',
            explorerUrl: 'https://bscscan.com',
            rpcUrl: 'https://bsc-dataseed.binance.org/'
        }

        const polygon = {
            chainId: 137,
            name: 'Polygon',
            currency: 'MATIC',
            explorerUrl: 'https://polygonscan.com',
            rpcUrl: 'https://polygon-rpc.com'
        }

        // 2. Cấu hình thông tin Website của bạn (Sẽ hiện lên trên điện thoại người dùng khi họ quét QR)
        const metadata = {
            name: 'Tên Website Của Bạn',
            description: 'Mô tả DApp của bạn',
            url: 'https://mywebsite.com', // Thay bằng domain của bạn
            icons: ['https://avatars.githubusercontent.com/u/37784886'] // Logo website
        }

        // 3. Khởi tạo Web3Modal
        const modal = createWeb3Modal({
            ethersConfig: defaultConfig({ 
                metadata,
                defaultChainId: 1,
                enableEIP6963: true, // Tự động phát hiện CÁC EXTENSION VÍ TẠI TRÌNH DUYỆT (Cực kỳ quan trọng)
                enableInjected: true,
                enableCoinbase: true,
            }),
            chains: [mainnet, bsc, polygon],
            projectId,
            themeMode: 'dark', // 'light' hoặc 'dark'
            themeVariables: {
                '--w3m-accent': '#4facfe', // Đổi màu chủ đạo của bảng chọn ví
                '--w3m-border-radius-master': '2px'
            }
        });

        // 4. (Tùy chọn) Lắng nghe sự kiện khi người dùng kết nối thành công để lấy địa chỉ ví làm logic tiếp theo
        modal.subscribeEvents(event => {
            console.log("Web3Modal Event:", event);
        });

        modal.subscribeProvider(state => {
            if (state.address) {
                console.log("Đã kết nối ví! Địa chỉ:", state.address);
                console.log("Mạng lưới hiện tại (Chain ID):", state.chainId);
            } else {
                console.log("Đã ngắt kết nối.");
            }
        });
    </script>
</body>
</html>
