<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Elite Profile & Academy</title>
    
    <!-- 1. THƯ VIỆN UI -->
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Toastify (Thông báo đẹp) -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

    <!-- 2. CONFIG TAILWIND & CUSTOM CSS -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Space Grotesk', 'sans-serif'],
                    },
                    colors: {
                        dark: {
                            bg: '#050505',
                            card: 'rgba(20, 20, 30, 0.6)',
                            border: 'rgba(255, 255, 255, 0.1)'
                        },
                        brand: {
                            primary: '#6366f1', // Indigo Neon
                            secondary: '#ec4899', // Pink Neon
                            accent: '#14b8a6', // Teal Neon
                            gold: '#fbbf24' // Gold
                        }
                    },
                    animation: {
                        'blob': 'blob 7s infinite',
                        'spin-slow': 'spin 12s linear infinite',
                        'pulse-glow': 'pulse-glow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        },
                        'pulse-glow': {
                            '0%, 100%': { opacity: 1, boxShadow: '0 0 20px rgba(99, 102, 241, 0.5)' },
                            '50%': { opacity: .8, boxShadow: '0 0 10px rgba(99, 102, 241, 0.2)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #050505;
            color: #ffffff;
            overflow-x: hidden;
        }

        /* Gradient Background Mesh */
        .bg-mesh {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -1;
            background: 
                radial-gradient(circle at 15% 50%, rgba(99, 102, 241, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(236, 72, 153, 0.15) 0%, transparent 25%);
        }

        /* Glassmorphism Classes */
        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        .glass-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.01) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }
        
        .glass-card:hover {
            transform: translateY(-5px);
            border-color: rgba(99, 102, 241, 0.3);
            box-shadow: 0 10px 40px -10px rgba(99, 102, 241, 0.3);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #6366f1; }

        /* Text Gradients */
        .text-gradient {
            background: linear-gradient(to right, #818cf8, #e879f9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .text-gradient-gold {
            background: linear-gradient(to right, #fbbf24, #d97706);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Avatar Glow */
        .avatar-glow {
            position: relative;
        }
        .avatar-glow::before {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 50%;
            background: linear-gradient(45deg, #6366f1, #ec4899);
            z-index: -1;
            animation: spin 4s linear infinite;
        }

        /* Loading Spinner */
        .loader {
            width: 48px; height: 48px;
            border: 5px solid #FFF;
            border-bottom-color: #6366f1;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="antialiased">

    <!-- Background Elements -->
    <div class="bg-mesh"></div>
    <!-- Moving Blobs for Atmosphere -->
    <div class="fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0">
        <div class="absolute top-0 -left-4 w-72 h-72 bg-brand-primary rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
        <div class="absolute top-0 -right-4 w-72 h-72 bg-brand-secondary rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>
        <div class="absolute -bottom-8 left-20 w-72 h-72 bg-brand-accent rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"></div>
    </div>

    <!-- === HEADER / NAV === -->
    <nav class="fixed top-0 w-full z-50 transition-all duration-300 backdrop-blur-md border-b border-white/5" id="navbar">
        <div class="max-w-6xl mx-auto px-6 h-20 flex items-center justify-between">
            <a href="#" class="font-display font-bold text-2xl tracking-tighter flex items-center gap-2">
                <i class="fa-brands fa-bitcoin text-brand-gold text-3xl"></i>
                <span class="text-white">CRYPTO<span class="text-brand-primary">HUB</span></span>
            </a>

            <div class="flex items-center gap-4">
                <div id="userSection" class="hidden flex items-center gap-3 bg-white/5 px-3 py-1.5 rounded-full border border-white/10">
                    <img id="imgUser" src="" class="w-8 h-8 rounded-full object-cover">
                    <span id="userNameDisplay" class="text-sm font-medium hidden sm:block"></span>
                </div>
                
                <button id="btnLogin" class="group relative px-6 py-2.5 font-bold text-white transition-all duration-200 bg-white/5 border border-white/10 rounded-full hover:bg-brand-primary hover:border-brand-primary overflow-hidden">
                    <span class="relative z-10 flex items-center gap-2">
                        <i class="fa-solid fa-rocket"></i> <span id="authText">Admin Access</span>
                    </span>
                    <div class="absolute inset-0 h-full w-full scale-0 rounded-full transition-all duration-300 group-hover:scale-100 group-hover:bg-brand-primary/20"></div>
                </button>
            </div>
        </div>
    </nav>

    <!-- === MAIN CONTENT === -->
    <main class="relative z-10 pt-32 pb-20 px-4 max-w-5xl mx-auto space-y-24">

        <!-- 1. HERO PROFILE SECTION -->
        <section id="profileSection" class="text-center relative" data-aos="fade-up" data-aos-duration="1000">
            <!-- Loading State -->
            <div id="profileLoader" class="loader mt-10"></div>
            
            <!-- Content Injected via JS -->
            <div id="profileContent" class="hidden">
                <!-- Avatar -->
                <div class="relative w-40 h-40 mx-auto mb-8 avatar-glow">
                    <img id="pAvatar" src="" class="w-full h-full rounded-full object-cover border-4 border-dark-bg relative z-10">
                    <div class="absolute bottom-2 right-2 z-20 bg-blue-500 text-white text-xs px-2 py-1 rounded-full border-2 border-black flex items-center gap-1 hidden" id="pVerified">
                        <i class="fa-solid fa-check"></i> Verified
                    </div>
                </div>

                <!-- Info -->
                <h1 class="font-display text-4xl md:text-6xl font-bold mb-4 tracking-tight">
                    <span id="pName" class="text-white"></span>
                </h1>
                <p id="pBio" class="text-gray-400 text-lg md:text-xl max-w-2xl mx-auto leading-relaxed font-light"></p>
                
                <!-- Stats (Fake for visual credibility) -->
                <div class="grid grid-cols-3 gap-4 max-w-lg mx-auto mt-8 border-t border-white/10 pt-6">
                    <div>
                        <div class="font-display font-bold text-2xl text-white">5K+</div>
                        <div class="text-xs text-gray-500 uppercase tracking-widest">Students</div>
                    </div>
                    <div>
                        <div class="font-display font-bold text-2xl text-brand-gold">98%</div>
                        <div class="text-xs text-gray-500 uppercase tracking-widest">Win Rate</div>
                    </div>
                    <div>
                        <div class="font-display font-bold text-2xl text-brand-primary">VIP</div>
                        <div class="text-xs text-gray-500 uppercase tracking-widest">Community</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. SOCIAL LINKS (Floating Glass) -->
        <section id="socialSection" class="flex flex-wrap justify-center gap-6" data-aos="fade-up" data-aos-delay="200">
            <!-- Injected via JS -->
        </section>

        <!-- 3. COURSES (Premium Cards) -->
        <section class="relative">
            <div class="flex items-center gap-4 mb-10" data-aos="fade-right">
                <div class="h-px bg-gradient-to-r from-transparent via-brand-primary to-transparent flex-1"></div>
                <h2 class="font-display text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400">
                    ACADEMY PRO
                </h2>
                <div class="h-px bg-gradient-to-r from-transparent via-brand-primary to-transparent flex-1"></div>
            </div>

            <div id="coursesList" class="grid gap-8 md:grid-cols-2">
                <!-- Courses injected here -->
            </div>
        </section>

        <!-- 4. PARTNERS & REF (Grid) -->
        <section>
            <div class="text-center mb-10" data-aos="fade-up">
                <h2 class="font-display text-2xl font-bold text-brand-accent mb-2">ĐỐI TÁC SÀN GIAO DỊCH</h2>
                <p class="text-gray-500 text-sm">Đăng ký qua link bên dưới để nhận hoàn phí giao dịch trọn đời</p>
            </div>
            
            <div id="exchangeList" class="grid gap-4 md:grid-cols-3">
                <!-- Exchanges injected here -->
            </div>
        </section>

    </main>

    <!-- === FOOTER === -->
    <footer class="border-t border-white/5 py-10 bg-black/50 backdrop-blur-lg mt-10">
        <div class="text-center">
            <p class="font-display font-bold text-xl tracking-wider mb-2 text-white">CRYPTO HUB</p>
            <p class="text-gray-600 text-sm">© 2024 Premium Personal Brand. Built for the Future.</p>
        </div>
    </footer>

    <!-- === MODALS === -->

    <!-- 1. Payment Modal -->
    <div id="paymentModal" class="fixed inset-0 z-[60] hidden flex items-center justify-center p-4 backdrop-blur-sm bg-black/80 transition-opacity opacity-0 pointer-events-none">
        <div class="glass-panel w-full max-w-md rounded-2xl p-6 transform scale-95 transition-all duration-300" id="paymentModalContent">
            <div class="flex justify-between items-center mb-6 border-b border-white/10 pb-4">
                <h3 class="font-display text-xl font-bold text-white">Xác nhận thanh toán</h3>
                <button onclick="closePaymentModal()" class="text-gray-400 hover:text-white transition"><i class="fa-solid fa-xmark text-xl"></i></button>
            </div>
            
            <div class="space-y-4">
                <div class="p-4 rounded-xl bg-gradient-to-r from-gray-900 to-gray-800 border border-white/5 flex items-center justify-between group cursor-pointer hover:border-brand-primary/50 transition" onclick="copyToClipboard('payBank')">
                    <div class="flex items-center gap-3">
                        <i class="fa-solid fa-building-columns text-green-400 text-xl"></i>
                        <div>
                            <div class="text-xs text-gray-400">Ngân hàng</div>
                            <div id="payBank" class="font-mono font-bold text-white">MB Bank - ...</div>
                        </div>
                    </div>
                    <i class="fa-regular fa-copy text-gray-500 group-hover:text-white"></i>
                </div>

                <div class="p-4 rounded-xl bg-gradient-to-r from-gray-900 to-gray-800 border border-white/5 flex items-center justify-between group cursor-pointer hover:border-brand-secondary/50 transition" onclick="copyToClipboard('payMomo')">
                    <div class="flex items-center gap-3">
                        <i class="fa-solid fa-wallet text-pink-500 text-xl"></i>
                        <div>
                            <div class="text-xs text-gray-400">MoMo</div>
                            <div id="payMomo" class="font-mono font-bold text-white">...</div>
                        </div>
                    </div>
                    <i class="fa-regular fa-copy text-gray-500 group-hover:text-white"></i>
                </div>

                <div class="p-4 rounded-xl bg-gradient-to-r from-gray-900 to-gray-800 border border-white/5 group cursor-pointer hover:border-brand-gold/50 transition" onclick="copyToClipboard('payUsdt')">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-3">
                            <i class="fa-brands fa-usdt text-brand-gold text-xl"></i>
                            <span class="text-xs text-gray-400">USDT (BEP20)</span>
                        </div>
                        <i class="fa-regular fa-copy text-gray-500 group-hover:text-white"></i>
                    </div>
                    <div id="payUsdt" class="font-mono text-xs text-gray-300 break-all">...</div>
                </div>
            </div>

            <div class="mt-8 text-center">
                <p class="text-sm text-gray-400 mb-3">Đã chuyển khoản? Gửi bill ngay:</p>
                <a href="#" target="_blank" class="inline-flex items-center gap-2 bg-[#0088cc] hover:bg-[#0099e6] text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-blue-500/20 transition-all transform hover:scale-105">
                    <i class="fa-brands fa-telegram"></i> Xác nhận qua Telegram
                </a>
            </div>
        </div>
    </div>

    <!-- 2. Admin Panel (Floating Dashboard) -->
    <button id="btnOpenAdmin" class="hidden fixed bottom-8 right-8 w-14 h-14 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-full shadow-[0_0_20px_rgba(220,38,38,0.5)] z-40 hover:scale-110 transition-transform flex items-center justify-center">
        <i class="fa-solid fa-gear fa-xl animate-spin-slow"></i>
    </button>

    <div id="adminPanel" class="fixed inset-0 z-[70] hidden bg-black/90 backdrop-blur-xl transition-all duration-300 overflow-y-auto">
        <div class="max-w-6xl mx-auto p-6 md:p-10 min-h-screen">
            <div class="flex justify-between items-center mb-10">
                <div>
                    <h2 class="text-3xl font-display font-bold text-white">Admin Dashboard</h2>
                    <p class="text-gray-400 text-sm">Quản lý toàn bộ hệ thống Crypto Hub</p>
                </div>
                <button onclick="toggleAdminPanel()" class="bg-gray-800 hover:bg-gray-700 px-5 py-2 rounded-lg text-white font-medium border border-gray-700">
                    Thoát <i class="fa-solid fa-right-from-bracket ml-2"></i>
                </button>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                <!-- Sidebar Menu -->
                <div class="lg:col-span-1 space-y-2">
                    <button onclick="switchAdminTab('tab-profile')" class="admin-tab-btn w-full text-left px-4 py-3 rounded-xl bg-white/10 text-white font-medium border border-brand-primary/50 shadow-[0_0_15px_rgba(99,102,241,0.2)]">
                        <i class="fa-regular fa-id-card w-6"></i> Profile
                    </button>
                    <button onclick="switchAdminTab('tab-courses')" class="admin-tab-btn w-full text-left px-4 py-3 rounded-xl hover:bg-white/5 text-gray-400 font-medium transition">
                        <i class="fa-solid fa-graduation-cap w-6"></i> Khóa học
                    </button>
                    <button onclick="switchAdminTab('tab-exchanges')" class="admin-tab-btn w-full text-left px-4 py-3 rounded-xl hover:bg-white/5 text-gray-400 font-medium transition">
                        <i class="fa-solid fa-money-bill-transfer w-6"></i> Sàn & Ref
                    </button>
                    <button onclick="switchAdminTab('tab-socials')" class="admin-tab-btn w-full text-left px-4 py-3 rounded-xl hover:bg-white/5 text-gray-400 font-medium transition">
                        <i class="fa-solid fa-share-nodes w-6"></i> Socials
                    </button>
                    <button onclick="switchAdminTab('tab-payment')" class="admin-tab-btn w-full text-left px-4 py-3 rounded-xl hover:bg-white/5 text-gray-400 font-medium transition">
                        <i class="fa-solid fa-credit-card w-6"></i> Thanh toán
                    </button>
                </div>

                <!-- Main Content Area -->
                <div class="lg:col-span-3 glass-panel rounded-2xl p-6 md:p-8">
                    
                    <!-- TAB: PROFILE -->
                    <div id="tab-profile" class="admin-section animate-fade-in">
                        <h3 class="text-xl font-bold mb-6 border-b border-gray-700 pb-2">Edit Profile</h3>
                        <form id="formProfile" class="space-y-5">
                            <div class="grid md:grid-cols-2 gap-5">
                                <div class="space-y-2">
                                    <label class="text-xs text-gray-400 uppercase">Tên hiển thị</label>
                                    <input type="text" id="adminName" class="w-full bg-black/50 border border-gray-700 p-3 rounded-lg text-white focus:border-brand-primary outline-none">
                                </div>
                                <div class="space-y-2">
                                    <label class="text-xs text-gray-400 uppercase">Avatar (URL)</label>
                                    <input type="text" id="adminAvatar" class="w-full bg-black/50 border border-gray-700 p-3 rounded-lg text-white focus:border-brand-primary outline-none">
                                </div>
                            </div>
                            <div class="space-y-2">
                                <label class="text-xs text-gray-400 uppercase">Tiểu sử (Bio)</label>
                                <textarea id="adminBio" rows="4" class="w-full bg-black/50 border border-gray-700 p-3 rounded-lg text-white focus:border-brand-primary outline-none"></textarea>
                            </div>
                            <label class="flex items-center gap-3 cursor-pointer">
                                <input type="checkbox" id="adminVerified" class="w-5 h-5 accent-brand-primary rounded">
                                <span class="text-white">Hiển thị tích xanh (Verified)</span>
                            </label>
                            <button type="submit" class="bg-brand-primary hover:bg-indigo-600 text-white px-8 py-3 rounded-lg font-bold shadow-lg shadow-indigo-500/30 transition">Lưu Thay Đổi</button>
                        </form>
                    </div>

                    <!-- TAB: COURSES -->
                    <div id="tab-courses" class="admin-section hidden">
                        <h3 class="text-xl font-bold mb-6 border-b border-gray-700 pb-2">Quản lý Khóa học</h3>
                        <form id="formCourse" class="bg-white/5 p-6 rounded-xl border border-white/10 mb-8">
                            <input type="hidden" id="courseId">
                            <div class="grid md:grid-cols-3 gap-4 mb-4">
                                <input type="text" id="courseName" placeholder="Tên khóa học" class="bg-black/50 border border-gray-700 p-3 rounded-lg text-white focus:border-brand-primary outline-none" required>
                                <input type="text" id="coursePrice" placeholder="Giá (VD: 500$)" class="bg-black/50 border border-gray-700 p-3 rounded-lg text-white outline-none" required>
                                <select id="courseType" class="bg-black/50 border border-gray-700 p-3 rounded-lg text-white outline-none">
                                    <option value="Standard">Standard</option>
                                    <option value="VIP">VIP</option>
                                    <option value="Premium">Premium</option>
                                </select>
                            </div>
                            <input type="text" id="courseBenefits" placeholder="Quyền lợi (cách nhau dấu phẩy)" class="w-full bg-black/50 border border-gray-700 p-3 rounded-lg text-white mb-4 outline-none">
                            <textarea id="courseDesc" placeholder="Mô tả khóa học" class="w-full bg-black/50 border border-gray-700 p-3 rounded-lg text-white mb-4 h-24 outline-none"></textarea>
                            
                            <div class="flex gap-3">
                                <button type="submit" class="bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-bold">Lưu</button>
                                <button type="button" onclick="resetCourseForm()" class="bg-gray-700 hover:bg-gray-600 text-white px-6 py-2 rounded-lg">Reset</button>
                            </div>
                        </form>
                        <div id="adminCourseList" class="space-y-3"></div>
                    </div>

                    <!-- TAB: EXCHANGES -->
                    <div id="tab-exchanges" class="admin-section hidden">
                        <h3 class="text-xl font-bold mb-6 border-b border-gray-700 pb-2">Sàn & Referral</h3>
                        <form id="formExchange" class="bg-white/5 p-6 rounded-xl border border-white/10 mb-8">
                            <input type="hidden" id="exchId">
                            <div class="grid md:grid-cols-2 gap-4 mb-4">
                                <input type="text" id="exchName" placeholder="Tên sàn" class="bg-black/50 border border-gray-700 p-3 rounded-lg text-white outline-none" required>
                                <input type="text" id="exchRate" placeholder="Mức hoàn phí" class="bg-black/50 border border-gray-700 p-3 rounded-lg text-white outline-none">
                                <input type="text" id="exchLink" placeholder="Link Ref" class="bg-black/50 border border-gray-700 p-3 rounded-lg text-white outline-none" required>
                                <input type="text" id="exchImg" placeholder="Link Logo" class="bg-black/50 border border-gray-700 p-3 rounded-lg text-white outline-none">
                            </div>
                            <button type="submit" class="bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-bold">Lưu Sàn</button>
                        </form>
                        <div id="adminExchList" class="space-y-3"></div>
                    </div>

                    <!-- TAB: SOCIALS -->
                    <div id="tab-socials" class="admin-section hidden">
                        <h3 class="text-xl font-bold mb-6 border-b border-gray-700 pb-2">Link Mạng Xã Hội</h3>
                        <form id="formSocials" class="space-y-4">
                            <div class="flex items-center gap-4">
                                <div class="w-10 h-10 rounded bg-[#1877F2] flex items-center justify-center text-white"><i class="fa-brands fa-facebook-f"></i></div>
                                <input type="text" id="socFb" class="flex-1 bg-black/50 border border-gray-700 p-3 rounded-lg text-white outline-none" placeholder="Facebook URL">
                            </div>
                            <div class="flex items-center gap-4">
                                <div class="w-10 h-10 rounded bg-[#0088cc] flex items-center justify-center text-white"><i class="fa-brands fa-telegram"></i></div>
                                <input type="text" id="socTele" class="flex-1 bg-black/50 border border-gray-700 p-3 rounded-lg text-white outline-none" placeholder="Telegram URL">
                            </div>
                            <div class="flex items-center gap-4">
                                <div class="w-10 h-10 rounded bg-[#ff0050] flex items-center justify-center text-white"><i class="fa-brands fa-tiktok"></i></div>
                                <input type="text" id="socTiktok" class="flex-1 bg-black/50 border border-gray-700 p-3 rounded-lg text-white outline-none" placeholder="Tiktok URL">
                            </div>
                             <div class="flex items-center gap-4">
                                <div class="w-10 h-10 rounded bg-[#FF0000] flex items-center justify-center text-white"><i class="fa-brands fa-youtube"></i></div>
                                <input type="text" id="socYt" class="flex-1 bg-black/50 border border-gray-700 p-3 rounded-lg text-white outline-none" placeholder="Youtube URL">
                            </div>
                            <button type="submit" class="bg-brand-primary hover:bg-indigo-600 text-white w-full py-3 rounded-lg font-bold mt-4">Cập nhật Socials</button>
                        </form>
                    </div>

                    <!-- TAB: PAYMENT -->
                    <div id="tab-payment" class="admin-section hidden">
                        <h3 class="text-xl font-bold mb-6 border-b border-gray-700 pb-2">Cấu hình Thanh toán</h3>
                        <form id="formPaymentConfig" class="space-y-4">
                            <div>
                                <label class="text-gray-400 text-sm">Ngân hàng</label>
                                <input type="text" id="confBank" class="w-full bg-black/50 border border-gray-700 p-3 rounded-lg text-white font-mono outline-none">
                            </div>
                            <div>
                                <label class="text-gray-400 text-sm">MoMo</label>
                                <input type="text" id="confMomo" class="w-full bg-black/50 border border-gray-700 p-3 rounded-lg text-white font-mono outline-none">
                            </div>
                            <div>
                                <label class="text-gray-400 text-sm">USDT Wallet (BEP20/TRC20)</label>
                                <input type="text" id="confUsdt" class="w-full bg-black/50 border border-gray-700 p-3 rounded-lg text-white font-mono outline-none">
                            </div>
                            <button type="submit" class="bg-purple-600 hover:bg-purple-500 text-white w-full py-3 rounded-lg font-bold">Lưu Cấu Hình</button>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- 3. Scripts -->
    
    <!-- UI Libraries Script -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <!-- Firebase (Module) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, collection, getDocs, addDoc, updateDoc, deleteDoc, query, orderBy } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // === CONFIG (THAY ĐỔI Ở ĐÂY) ===
        const firebaseConfig = {
            apiKey: "AIzaSyCLCcgaoW9gNYhKk0c0gDWC6i5mKVTN4XE",
            authDomain: "profile-d1214.firebaseapp.com",
            projectId: "profile-d1214",
            storageBucket: "profile-d1214.firebasestorage.app",
            messagingSenderId: "914980131889",
            appId: "1:914980131889:web:72f8da15c42dbee671b110"
        };

        const ALLOWED_ADMIN_EMAILS = [
            "your-email@gmail.com" // <--- THAY EMAIL CỦA BẠN VÀO ĐÂY
        ];

        // Init App
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const provider = new GoogleAuthProvider();

        // UI Helpers
        const toast = (msg, type = "success") => {
            Toastify({
                text: msg,
                duration: 3000,
                gravity: "top", 
                position: "right", 
                style: {
                    background: type === "success" ? "linear-gradient(to right, #00b09b, #96c93d)" : "linear-gradient(to right, #ff5f6d, #ffc371)",
                    borderRadius: "10px",
                    fontWeight: "bold"
                }
            }).showToast();
        };

        const nl2br = (str) => str ? str.replace(/\n/g, "<br>") : "";

        // --- AUTH & ADMIN CHECK ---
        let currentUser = null;
        let isAdmin = false;

        onAuthStateChanged(auth, (user) => {
            currentUser = user;
            if (user) {
                // UI changes on Login
                document.getElementById('authText').innerText = "Đăng xuất";
                document.getElementById('imgUser').src = user.photoURL;
                document.getElementById('userSection').classList.remove('hidden');
                document.getElementById('userSection').classList.add('flex');
                document.getElementById('userNameDisplay').innerText = user.displayName;

                if (ALLOWED_ADMIN_EMAILS.includes(user.email)) {
                    isAdmin = true;
                    document.getElementById('btnOpenAdmin').classList.remove('hidden');
                    toast(`Chào mừng Admin: ${user.displayName}`);
                } else {
                    isAdmin = false;
                    document.getElementById('btnOpenAdmin').classList.add('hidden');
                }
            } else {
                // UI changes on Logout
                document.getElementById('authText').innerText = "Admin Access";
                document.getElementById('userSection').classList.add('hidden');
                document.getElementById('btnOpenAdmin').classList.add('hidden');
                isAdmin = false;
            }
        });

        document.getElementById('btnLogin').addEventListener('click', async () => {
            if (currentUser) {
                await signOut(auth);
                toast("Đã đăng xuất", "info");
            } else {
                try {
                    await signInWithPopup(auth, provider);
                } catch (e) {
                    toast(e.message, "error");
                }
            }
        });

        // --- PUBLIC DATA LOADING ---
        async function loadData() {
            // 1. Profile
            const pRef = doc(db, "site_content", "profile");
            const pSnap = await getDoc(pRef);
            
            document.getElementById('profileLoader').classList.add('hidden');
            const pContent = document.getElementById('profileContent');
            pContent.classList.remove('hidden');
            pContent.classList.add('animate-fade-in'); // Add logic animation class if defined or just rely on AOS

            if (pSnap.exists()) {
                const d = pSnap.data();
                document.getElementById('pAvatar').src = d.avatar || 'https://via.placeholder.com/150';
                document.getElementById('pName').innerText = d.name || 'Crypto Master';
                document.getElementById('pBio').innerHTML = nl2br(d.bio);
                if (d.verified) document.getElementById('pVerified').classList.remove('hidden');
            }

            // 2. Socials
            const sSnap = await getDoc(doc(db, "site_content", "socials"));
            const sDiv = document.getElementById('socialSection');
            sDiv.innerHTML = '';
            if (sSnap.exists()) {
                const s = sSnap.data();
                const map = [
                    { k: 'fb', i: 'fa-facebook-f', c: 'hover:bg-[#1877F2]' },
                    { k: 'tele', i: 'fa-telegram', c: 'hover:bg-[#0088cc]' },
                    { k: 'tiktok', i: 'fa-tiktok', c: 'hover:bg-[#ff0050]' },
                    { k: 'yt', i: 'fa-youtube', c: 'hover:bg-[#FF0000]' },
                ];
                map.forEach(m => {
                    if(s[m.k]) {
                        sDiv.innerHTML += `
                            <a href="${s[m.k]}" target="_blank" class="w-14 h-14 rounded-2xl glass-panel flex items-center justify-center text-2xl text-white transition-all duration-300 hover:scale-110 ${m.c} border border-white/10 shadow-lg">
                                <i class="fa-brands ${m.i}"></i>
                            </a>
                        `;
                    }
                });
            }

            // 3. Courses
            const cSnap = await getDocs(collection(db, "courses"));
            const cDiv = document.getElementById('coursesList');
            cDiv.innerHTML = '';
            cSnap.forEach((doc) => {
                const c = doc.data();
                const isVip = c.type === 'VIP' || c.type === 'Premium';
                const glowClass = isVip ? 'border-brand-primary/50 shadow-[0_0_30px_rgba(99,102,241,0.15)]' : 'border-white/10';
                const badge = isVip ? `<div class="absolute -top-3 right-4 bg-gradient-to-r from-brand-gold to-orange-500 text-black text-xs font-bold px-3 py-1 rounded-full shadow-lg">BEST SELLER</div>` : '';

                // Benefits list
                let benefitsHtml = '';
                if(c.benefits) {
                    benefitsHtml = c.benefits.split(',').map(b => 
                        `<li class="flex items-start gap-2 text-sm text-gray-300"><i class="fa-solid fa-check text-brand-accent mt-1"></i> ${b.trim()}</li>`
                    ).join('');
                }

                cDiv.innerHTML += `
                    <div class="glass-card rounded-3xl p-8 relative ${glowClass} group" data-aos="fade-up">
                        ${badge}
                        <div class="text-xs font-bold tracking-widest text-brand-primary uppercase mb-2">${c.type}</div>
                        <h3 class="text-2xl font-display font-bold text-white mb-2">${c.name}</h3>
                        <div class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400 mb-6">${c.price}</div>
                        
                        <p class="text-gray-400 text-sm mb-6 line-clamp-3">${c.desc}</p>
                        
                        <ul class="space-y-3 mb-8">
                            ${benefitsHtml}
                        </ul>
                        
                        <button onclick="openPaymentModal()" class="w-full py-4 rounded-xl font-bold text-white bg-gradient-to-r from-gray-800 to-gray-900 border border-white/10 group-hover:from-brand-primary group-hover:to-indigo-600 transition-all shadow-lg group-hover:shadow-indigo-500/25">
                            Đăng ký ngay <i class="fa-solid fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
                        </button>
                    </div>
                `;
            });

            // 4. Exchanges
            const eSnap = await getDocs(collection(db, "exchanges"));
            const eDiv = document.getElementById('exchangeList');
            eDiv.innerHTML = '';
            eSnap.forEach(doc => {
                const e = doc.data();
                eDiv.innerHTML += `
                    <div class="glass-panel p-4 rounded-2xl flex flex-col items-center text-center gap-3 hover:bg-white/5 transition border border-white/5" data-aos="zoom-in">
                        <img src="${e.img || 'https://via.placeholder.com/50'}" class="w-12 h-12 object-contain rounded-lg bg-white p-1">
                        <div>
                            <div class="font-bold text-white">${e.name}</div>
                            <div class="text-xs text-green-400 bg-green-900/30 px-2 py-1 rounded mt-1 inline-block">Ref: ${e.rate}</div>
                        </div>
                        <a href="${e.link}" target="_blank" class="w-full mt-2 bg-brand-primary/10 hover:bg-brand-primary hover:text-white text-brand-primary py-2 rounded-lg text-sm font-bold transition">Đăng Ký</a>
                    </div>
                `;
            });

            // 5. Payment Config
            const paySnap = await getDoc(doc(db, "site_content", "payment"));
            if(paySnap.exists()){
                const d = paySnap.data();
                if(d.bank) document.getElementById('payBank').innerText = d.bank;
                if(d.momo) document.getElementById('payMomo').innerText = d.momo;
                if(d.usdt) document.getElementById('payUsdt').innerText = d.usdt;
            }
        }

        // --- ADMIN PANEL LOGIC ---

        // Toggle Panel
        window.toggleAdminPanel = () => {
            const p = document.getElementById('adminPanel');
            const isOpen = !p.classList.contains('hidden');
            
            if(isOpen) {
                p.classList.add('opacity-0');
                setTimeout(() => p.classList.add('hidden'), 300);
            } else {
                p.classList.remove('hidden');
                // Force reflow
                void p.offsetWidth; 
                p.classList.remove('opacity-0');
                loadAdminData();
            }
        };
        document.getElementById('btnOpenAdmin').addEventListener('click', window.toggleAdminPanel);

        // Tabs
        window.switchAdminTab = (id) => {
            document.querySelectorAll('.admin-section').forEach(el => el.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            document.getElementById(id).classList.add('animate-fade-in');
            
            // Update button styles
            document.querySelectorAll('.admin-tab-btn').forEach(btn => {
                btn.classList.remove('bg-white/10', 'text-white', 'border', 'border-brand-primary/50', 'shadow-[0_0_15px_rgba(99,102,241,0.2)]');
                btn.classList.add('text-gray-400');
            });
            event.currentTarget.classList.remove('text-gray-400');
            event.currentTarget.classList.add('bg-white/10', 'text-white', 'border', 'border-brand-primary/50', 'shadow-[0_0_15px_rgba(99,102,241,0.2)]');
        };

        // Load Data to Forms
        async function loadAdminData() {
            if(!isAdmin) return;
            // Profile
            const p = await getDoc(doc(db, "site_content", "profile"));
            if(p.exists()) {
                const d = p.data();
                document.getElementById('adminName').value = d.name || '';
                document.getElementById('adminBio').value = d.bio || '';
                document.getElementById('adminAvatar').value = d.avatar || '';
                document.getElementById('adminVerified').checked = d.verified || false;
            }
            // Socials
            const s = await getDoc(doc(db, "site_content", "socials"));
            if(s.exists()) {
                const d = s.data();
                document.getElementById('socFb').value = d.fb || '';
                document.getElementById('socTele').value = d.tele || '';
                document.getElementById('socTiktok').value = d.tiktok || '';
                document.getElementById('socYt').value = d.yt || '';
            }
            // Payment
            const pay = await getDoc(doc(db, "site_content", "payment"));
            if(pay.exists()){
                const d = pay.data();
                document.getElementById('confBank').value = d.bank || '';
                document.getElementById('confMomo').value = d.momo || '';
                document.getElementById('confUsdt').value = d.usdt || '';
            }
            
            renderAdminCourses();
            renderAdminExchanges();
        }

        // --- CRUD ACTIONS ---
        
        // 1. Profile
        document.getElementById('formProfile').addEventListener('submit', async (e) => {
            e.preventDefault();
            await setDoc(doc(db, "site_content", "profile"), {
                name: document.getElementById('adminName').value,
                bio: document.getElementById('adminBio').value,
                avatar: document.getElementById('adminAvatar').value,
                verified: document.getElementById('adminVerified').checked
            });
            toast("Profile đã cập nhật!");
            loadData();
        });

        // 2. Socials
        document.getElementById('formSocials').addEventListener('submit', async (e) => {
            e.preventDefault();
            await setDoc(doc(db, "site_content", "socials"), {
                fb: document.getElementById('socFb').value,
                tele: document.getElementById('socTele').value,
                tiktok: document.getElementById('socTiktok').value,
                yt: document.getElementById('socYt').value
            });
            toast("Socials đã cập nhật!");
            loadData();
        });

        // 3. Payment
        document.getElementById('formPaymentConfig').addEventListener('submit', async (e) => {
            e.preventDefault();
            await setDoc(doc(db, "site_content", "payment"), {
                bank: document.getElementById('confBank').value,
                momo: document.getElementById('confMomo').value,
                usdt: document.getElementById('confUsdt').value
            });
            toast("Thanh toán đã cập nhật!");
            loadData();
        });

        // 4. Courses (Full CRUD)
        async function renderAdminCourses() {
            const snap = await getDocs(collection(db, "courses"));
            const list = document.getElementById('adminCourseList');
            list.innerHTML = '';
            snap.forEach(doc => {
                const c = doc.data();
                list.innerHTML += `
                    <div class="flex items-center justify-between bg-white/5 p-3 rounded border border-white/10">
                        <div class="font-bold text-white">${c.name}</div>
                        <div class="flex gap-2">
                            <button onclick="editCourse('${doc.id}')" class="text-blue-400 hover:text-white p-2"><i class="fa-solid fa-pen"></i></button>
                            <button onclick="deleteCourse('${doc.id}')" class="text-red-400 hover:text-white p-2"><i class="fa-solid fa-trash"></i></button>
                        </div>
                    </div>
                `;
            });
        }
        
        document.getElementById('formCourse').addEventListener('submit', async (e) => {
            e.preventDefault();
            const id = document.getElementById('courseId').value;
            const data = {
                name: document.getElementById('courseName').value,
                price: document.getElementById('coursePrice').value,
                type: document.getElementById('courseType').value,
                benefits: document.getElementById('courseBenefits').value,
                desc: document.getElementById('courseDesc').value
            };
            if(id) await updateDoc(doc(db, "courses", id), data);
            else await addDoc(collection(db, "courses"), data);
            
            toast("Đã lưu khóa học!");
            document.getElementById('formCourse').reset();
            document.getElementById('courseId').value = '';
            renderAdminCourses();
            loadData();
        });

        window.editCourse = async (id) => {
            const d = (await getDoc(doc(db, "courses", id))).data();
            document.getElementById('courseId').value = id;
            document.getElementById('courseName').value = d.name;
            document.getElementById('coursePrice').value = d.price;
            document.getElementById('courseType').value = d.type;
            document.getElementById('courseBenefits').value = d.benefits;
            document.getElementById('courseDesc').value = d.desc;
        };

        window.deleteCourse = async (id) => {
            if(confirm('Xóa khóa học này?')) {
                await deleteDoc(doc(db, "courses", id));
                renderAdminCourses();
                loadData();
                toast("Đã xóa!", "error");
            }
        };

        window.resetCourseForm = () => {
            document.getElementById('formCourse').reset();
            document.getElementById('courseId').value = '';
        }

        // 5. Exchanges (Full CRUD)
        async function renderAdminExchanges() {
            const snap = await getDocs(collection(db, "exchanges"));
            const list = document.getElementById('adminExchList');
            list.innerHTML = '';
            snap.forEach(doc => {
                const c = doc.data();
                list.innerHTML += `
                    <div class="flex items-center justify-between bg-white/5 p-3 rounded border border-white/10">
                        <div class="font-bold text-white">${c.name}</div>
                        <div class="flex gap-2">
                            <button onclick="deleteExch('${doc.id}')" class="text-red-400 hover:text-white p-2"><i class="fa-solid fa-trash"></i></button>
                        </div>
                    </div>
                `;
            });
        }

        document.getElementById('formExchange').addEventListener('submit', async (e) => {
            e.preventDefault();
            await addDoc(collection(db, "exchanges"), {
                name: document.getElementById('exchName').value,
                rate: document.getElementById('exchRate').value,
                link: document.getElementById('exchLink').value,
                img: document.getElementById('exchImg').value
            });
            toast("Đã thêm sàn!");
            document.getElementById('formExchange').reset();
            renderAdminExchanges();
            loadData();
        });
        
        window.deleteExch = async (id) => {
            if(confirm('Xóa sàn này?')) {
                await deleteDoc(doc(db, "exchanges", id));
                renderAdminExchanges();
                loadData();
                toast("Đã xóa sàn!", "error");
            }
        };

        // --- GLOBAL UI FUNCTIONS ---
        
        // Modal Logic
        const modal = document.getElementById('paymentModal');
        const modalContent = document.getElementById('paymentModalContent');

        window.openPaymentModal = () => {
            modal.classList.remove('hidden');
            // Slight delay for animation
            setTimeout(() => {
                modal.classList.remove('opacity-0', 'pointer-events-none');
                modalContent.classList.remove('scale-95');
                modalContent.classList.add('scale-100');
            }, 10);
        };

        window.closePaymentModal = () => {
            modal.classList.add('opacity-0', 'pointer-events-none');
            modalContent.classList.remove('scale-100');
            modalContent.classList.add('scale-95');
            setTimeout(() => modal.classList.add('hidden'), 300);
        };

        // Copy to clipboard
        window.copyToClipboard = (elementId) => {
            const text = document.getElementById(elementId).innerText;
            navigator.clipboard.writeText(text).then(() => {
                toast("Đã copy vào bộ nhớ!");
            });
        };

        // Init Animation Library
        AOS.init({
            once: true,
            offset: 100,
            duration: 800,
            easing: 'ease-out-cubic',
        });

        // Run Load Data
        loadData();

    </script>
</body>
</html>
