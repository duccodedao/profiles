<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check Full Telegram Info</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background-color: var(--tg-theme-bg-color, #fff);
            color: var(--tg-theme-text-color, #000);
            font-family: monospace; /* D√πng font n√†y ƒë·ªÉ nh√¨n gi·ªëng code */
            margin: 0;
            padding: 15px;
            font-size: 13px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid var(--tg-theme-button-color, #3390ec);
            object-fit: cover;
        }

        .section {
            background: var(--tg-theme-secondary-bg-color, #f5f5f5);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            word-wrap: break-word;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        h3 {
            margin-top: 0;
            color: var(--tg-theme-link-color, #3390ec);
            border-bottom: 1px dashed var(--tg-theme-hint-color, #ccc);
            padding-bottom: 5px;
        }

        .row {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .key {
            font-weight: bold;
            color: var(--tg-theme-hint-color, #888);
        }

        .value {
            font-weight: bold;
            text-align: right;
            max-width: 60%;
        }

        .warning {
            color: #ff4444;
            font-style: italic;
            font-size: 11px;
            margin-top: 5px;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <img id="avatar" class="avatar" src="https://via.placeholder.com/100" alt="Avatar">
        <h2 id="full-name">Checking...</h2>
    </div>

    <!-- 1. Th√¥ng tin User -->
    <div class="section">
        <h3>üë§ USER INFO (initDataUnsafe.user)</h3>
        <div id="user-info-list"></div>
        <div class="warning">* L∆∞u √Ω: Phone & Email kh√¥ng c√≥ s·∫µn trong API n√†y v√¨ l√Ω do b·∫£o m·∫≠t.</div>
    </div>

    <!-- 2. Th√¥ng tin ·ª®ng d·ª•ng & Thi·∫øt b·ªã -->
    <div class="section">
        <h3>üì± DEVICE & APP SYSTEM</h3>
        <div id="system-info-list"></div>
    </div>

    <!-- 3. Th√¥ng tin Theme (M√†u s·∫Øc) -->
    <div class="section">
        <h3>üé® THEME PARAMS</h3>
        <div id="theme-info-list"></div>
    </div>

    <!-- 4. Raw Data -->
    <div class="section">
        <h3>üîê RAW INIT DATA (Chu·ªói x√°c th·ª±c)</h3>
        <div class="value" style="text-align: left; font-size: 10px;" id="raw-data"></div>
    </div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand(); // M·ªü full m√†n h√¨nh

    // H√†m h·ªó tr·ª£ t·∫°o d√≤ng hi·ªÉn th·ªã
    function createRow(key, value) {
        const div = document.createElement('div');
        div.className = 'row';
        
        // X·ª≠ l√Ω hi·ªÉn th·ªã true/false cho ƒë·∫πp
        let displayValue = value;
        if (typeof value === 'boolean') {
            displayValue = value ? '‚úÖ True' : '‚ùå False';
        }
        if (!value && value !== 0 && value !== false) displayValue = 'Empty/Null';

        div.innerHTML = `<span class="key">${key}</span><span class="value">${displayValue}</span>`;
        return div;
    }

    // --- 1. X·ª¨ L√ù TH√îNG TIN USER ---
    const user = tg.initDataUnsafe.user;
    const userList = document.getElementById('user-info-list');

    if (user) {
        // C·∫≠p nh·∫≠t Avatar & T√™n
        document.getElementById('full-name').innerText = `${user.first_name} ${user.last_name || ''}`;
        if (user.photo_url) document.getElementById('avatar').src = user.photo_url;

        // V√≤ng l·∫∑p l·∫•y h·∫øt t·∫•t c·∫£ thu·ªôc t√≠nh c·ªßa user object
        // C√°c tr∆∞·ªùng th∆∞·ªùng c√≥: id, is_bot, first_name, last_name, username, language_code, is_premium, added_to_attachment_menu, allows_write_to_pm
        for (const [key, value] of Object.entries(user)) {
            userList.appendChild(createRow(key, value));
        }
    } else {
        userList.innerHTML = '<div class="row">Kh√¥ng t√¨m th·∫•y th√¥ng tin User (vui l√≤ng m·ªü b·∫±ng Telegram)</div>';
    }

    // --- 2. X·ª¨ L√ù TH√îNG TIN H·ªÜ TH·ªêNG ---
    const sysList = document.getElementById('system-info-list');
    
    // C√°c th√¥ng s·ªë h·ªá th·ªëng m√† Telegram cung c·∫•p
    const sysData = {
        'Platform (H·ªá ƒëi·ªÅu h√†nh)': tg.platform, // android, ios, tdesktop, weba...
        'App Version': tg.version, // Phi√™n b·∫£n Bot API
        'Color Scheme': tg.colorScheme, // light ho·∫∑c dark
        'Is Expanded': tg.isExpanded,
        'Viewport Height': tg.viewportHeight,
        'Viewport Stable Height': tg.viewportStableHeight
    };

    for (const [key, value] of Object.entries(sysData)) {
        sysList.appendChild(createRow(key, value));
    }

    // --- 3. X·ª¨ L√ù TH√îNG TIN THEME (M√†u s·∫Øc giao di·ªán hi·ªán t·∫°i c·ªßa user) ---
    const themeList = document.getElementById('theme-info-list');
    const themeParams = tg.themeParams;
    
    for (const [key, value] of Object.entries(themeParams)) {
        // T·∫°o √¥ m√†u ƒë·ªÉ d·ªÖ nh√¨n
        const colorBox = `<span style="background:${value}; width:12px; height:12px; display:inline-block; border:1px solid #ccc; margin-right:5px;"></span>${value}`;
        
        const div = document.createElement('div');
        div.className = 'row';
        div.innerHTML = `<span class="key">${key}</span><span class="value">${colorBox}</span>`;
        themeList.appendChild(div);
    }

    // --- 4. RAW DATA ---
    document.getElementById('raw-data').innerText = tg.initData;

</script>
</body>
</html>
